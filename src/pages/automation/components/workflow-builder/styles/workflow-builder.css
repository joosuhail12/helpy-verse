/* Workflow Builder Styles */

.workflow-builder .react-flow__edge path {
  transition: stroke 0.2s, stroke-width 0.2s, opacity 0.2s;
}

.workflow-builder .react-flow__edge:hover path {
  stroke-width: 2.5px;
}

.workflow-builder .react-flow__edge.edge-success path {
  stroke: #22c55e;
}

.workflow-builder .react-flow__edge.edge-failure path {
  stroke: #ef4444;
}

.workflow-builder .react-flow__edge.edge-animated path {
  animation: flow 1.5s infinite linear;
  stroke-dasharray: 8;
}

/* Add different dash patterns to different edge types */
.workflow-builder .react-flow__edge.edge-failure path {
  stroke-dasharray: 5 3;
}

/* Snap to grid indicator */
.workflow-builder.snap-active {
  background-size: var(--grid-size) var(--grid-size);
  background-image: radial-gradient(circle, #e5e7eb 1px, transparent 1px);
  background-position: 0 0;
}

/* Node styles */ 
.workflow-builder .react-flow__node {
  transition: transform 0.2s, box-shadow 0.3s;
  z-index: 2;
}

.workflow-builder .react-flow__node:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
  z-index: 10;
}

/* Node connection animation */
.connecting-valid .react-flow__handle {
  animation: pulse 1.5s infinite;
}

@keyframes flow {
  from {
    stroke-dashoffset: 24;
  }
  to {
    stroke-dashoffset: 0;
  }
}

@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.7);
  }
  70% {
    box-shadow: 0 0 0 5px rgba(99, 102, 241, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
  }
}

/* Node types with colors */
.node-trigger {
  border-left: 3px solid #818cf8 !important;
}

.node-message {
  border-left: 3px solid #60a5fa !important;
}

.node-condition {
  border-left: 3px solid #a78bfa !important;
}

.node-action {
  border-left: 3px solid #22c55e !important;
}

.node-end {
  border-left: 3px solid #ef4444 !important;
}

/* Node configuration states */
.node-configured {
  border-bottom: 2px solid #22c55e !important;
}

.node-unconfigured {
  border-bottom: 2px solid #f59e0b !important;
}

/* Connection line animation */
.react-flow__connection-path {
  stroke-dasharray: 5;
  animation: flow 1s infinite linear;
}

/* Node hover card animations */
.animate-fadeSlideIn {
  animation: fadeSlideIn 0.3s ease-out forwards;
}

@keyframes fadeSlideIn {
  0% {
    opacity: 0;
    transform: translateY(5px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Add new styles for node add buttons */
.node-add-button {
  position: absolute;
  bottom: -20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
}

/* Ensure the add button doesn't interfere with node selection */
.node-add-button button:focus {
  outline: none;
}

/* Style for the add node popover to ensure it's above other elements */
.react-flow .node-popover {
  z-index: 1000;
}

/* Ensure buttons are visible and have proper z-index */
.react-flow__node button {
  z-index: 10;
  pointer-events: all;
}
